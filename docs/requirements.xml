<Requirements VERSION="0.2.0">
    <UC-MAP-01 NAME="Замена блоков дизайнера">
        <Actor>Инженер ЭОМ</Actor>
        <Description>Массовая замена сторонних блоков на блоки из стандарта организации с сохранением данных.</Description>
        <Steps>
            <step-1>Инженер вызывает команду EOM_MAP.</step-1>
            <step-2>Система запрашивает выбор блоков на чертеже.</step-2>
            <step-3>Для каждого блока система ищет соответствие в Settings.json (по имени).</step-3>
            <step-4>Система считывает значение атрибута (например, 'ВЫСОТА') из исходного блока.</step-4>
            <step-5>Система заменяет блок на целевой, сохраняя точку вставки, угол поворота и записывая считанную высоту в новый атрибут.</step-5>
        </Steps>
    </UC-MAP-01>

    <UC-TRACE-01 NAME="Трассировка и расчет длины">
        <Actor>Инженер ЭОМ</Actor>
        <Description>Автоматический расчет реальной длины кабеля с учетом вертикальных участков.</Description>
        <Steps>
            <step-1>Инженер вызывает команду EOM_TRACE.</step-1>
            <step-2>Инженер выбирает полилинию (трассу) и два блока (источник и потребитель).</step-2>
            <step-3>Система нормализует координаты (UCS to WCS).</step-3>
            <step-4>Система извлекает атрибут 'ВЫСОТА_УСТАНОВКИ' из обоих блоков.</step-4>
            <step-5>Система вычисляет: L_total = L_2d + ABS(H1 - H2) + запас 5%.</step-5>
            <step-6>Система записывает результат и марку кабеля в XData полилинии.</step-6>
        </Steps>
    </UC-TRACE-01>

    <UC-SPEC-01 NAME="Формирование спецификации">
        <Actor>Инженер ЭОМ</Actor>
        <Description>Сбор данных из чертежа и выгрузка в таблицу.</Description>
        <Steps>
            <step-1>Инженер вызывает команду EOM_SPEC.</step-1>
            <step-2>Система сканирует чертеж на наличие XData с ключом 'EOM_DATA'.</step-2>
            <step-3>Система суммирует длины кабелей по типам и группам.</step-3>
            <step-4>Система формирует таблицу AutoCAD или CSV-файл для Excel.</step-4>
        </Steps>
    </UC-SPEC-01>
</Requirements>
